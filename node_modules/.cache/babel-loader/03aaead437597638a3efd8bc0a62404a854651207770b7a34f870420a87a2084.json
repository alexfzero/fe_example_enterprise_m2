{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nfunction isDict(v) {\n  return typeof v === 'object' && v !== null && !(v instanceof Array) && !(v instanceof Date);\n}\nexport default {\n  data() {\n    return {\n      errors: {\n        fields: {},\n        non: []\n      },\n      scrolled: false\n    };\n  },\n  methods: {\n    setNotScrolled: function () {\n      this.scrolled = false;\n    },\n    setScrolled: function () {\n      this.scrolled = true;\n    },\n    mapErrors: function (data) {\n      if (data && data.hasOwnProperty('non_field_errors')) this.addNonFieldError(data['non_field_errors']);\n      this.setNotScrolled();\n      this.errors.fields = data;\n    },\n    hasError: function (field, errors = undefined) {\n      let result = this.getError(field) !== null;\n      if (result && !this.scrolled) {\n        if (this.$refs[field]) {\n          this.setScrolled();\n          let ref = this.$refs[field];\n          if (Array.isArray(this.$refs[field])) ref = ref[0];\n          ref.$el.scrollIntoView();\n        }\n      }\n      return result;\n    },\n    getError: function (field, errors = undefined) {\n      if (errors === undefined) errors = this.errors.fields;\n      for (let val in errors) {\n        if (isDict(errors[val])) {\n          if (field !== undefined && field !== null && field.includes('.')) {\n            return this.getError(field.split('.').slice(1).join('.'), errors[val]);\n          }\n        }\n        if (errors[val].length > 0) if (val === field) return errors[val];\n      }\n      return null;\n    },\n    deleteError: function (field, id = undefined) {\n      delete this.errors.fields[field];\n      if (id !== undefined) {\n        this.$delete(this.errors.fields[id], field);\n        if (Object.keys(this.errors.fields[id]).length === 0) {\n          this.$delete(this.errors.fields, id);\n        }\n      } else {\n        delete this.errors.fields[field];\n      }\n    },\n    deleteNonFieldError: function (error) {\n      let errors = this.errors.non;\n      errors.splice(errors.indexOf(error), 1);\n      this.$set(this.errors, 'non', errors);\n    },\n    addNonFieldError: function (error) {\n      let errors = this.errors.non;\n      if (errors.indexOf(error)) errors.push(error);\n      this.$set(this.errors, 'non', errors);\n      // this.show_non_field_errors = true;\n    },\n\n    getNonFieldErrors: function () {\n      return this.errors.non;\n    }\n  }\n};","map":{"version":3,"names":["isDict","v","Array","Date","data","errors","fields","non","scrolled","methods","setNotScrolled","setScrolled","mapErrors","hasOwnProperty","addNonFieldError","hasError","field","undefined","result","getError","$refs","ref","isArray","$el","scrollIntoView","val","includes","split","slice","join","length","deleteError","id","$delete","Object","keys","deleteNonFieldError","error","splice","indexOf","$set","push","getNonFieldErrors"],"sources":["/home/alex/gitProjects/fe_be_mk_example_enterprise/fe_example_enterprise_m2/src/mixins/FormErrorsMixin.js"],"sourcesContent":["function isDict(v) {\n    return typeof v==='object' && v!==null && !(v instanceof Array) && !(v instanceof Date);\n}\n\nexport default {\n    data() {\n        return {\n            errors: {\n                fields: {},\n                non: []\n            },\n            scrolled: false,\n        }\n    },\n    methods: {\n        setNotScrolled: function () {\n            this.scrolled = false;\n        },\n        setScrolled: function () {\n            this.scrolled = true;\n        },\n        mapErrors: function (data) {\n            if (data && data.hasOwnProperty('non_field_errors'))\n                this.addNonFieldError(data['non_field_errors']);\n            this.setNotScrolled();\n            this.errors.fields = data;\n        },\n        hasError: function (field, errors=undefined) {\n            let result = this.getError(field) !== null;\n            if (result && !this.scrolled) {\n                if (this.$refs[field]) {\n                    this.setScrolled();\n                    let ref = this.$refs[field];\n                    if (Array.isArray(this.$refs[field]))\n                        ref = ref[0];\n                    ref.$el.scrollIntoView();\n                }\n            }\n            return result\n        },\n        getError: function (field, errors=undefined) {\n            if(errors === undefined)\n                errors = this.errors.fields\n            for (let val in errors){\n                if (isDict(errors[val])) {\n                    if (field !== undefined && field !== null && field.includes('.')) {\n                        return this.getError(field.split('.').slice(1).join('.'), errors[val]);\n                    }\n                }\n                if((errors[val]).length > 0)\n                    if(val === field)\n                        return errors[val];\n            }\n            return null;\n        },\n        deleteError: function (field, id = undefined) {\n            delete this.errors.fields[field];\n            if (id !== undefined) {\n                this.$delete(this.errors.fields[id], field);\n                if (Object.keys(this.errors.fields[id]).length === 0) {\n                    this.$delete(this.errors.fields, id);\n                }\n            } else {\n                delete this.errors.fields[field];\n            }\n        },\n        deleteNonFieldError: function (error) {\n            let errors = this.errors.non;\n            errors.splice(errors.indexOf(error), 1);\n            this.$set(this.errors, 'non', errors);\n        },\n        addNonFieldError: function (error) {\n            let errors = this.errors.non;\n            if (errors.indexOf(error))\n                errors.push(error);\n            this.$set(this.errors, 'non', errors);\n            // this.show_non_field_errors = true;\n        },\n        getNonFieldErrors: function () {\n            return this.errors.non\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}