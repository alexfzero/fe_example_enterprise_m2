{"ast":null,"code":"import PageHeader from \"@/modules/core/components/PageHeader.vue\";\nimport urls from \"@/urls/urls\";\nimport roles from \"@/urls/roles\";\nimport { makeGetRequest, makeDeleteRequest } from \"@/helper\";\nexport default {\n  name: \"PosList\",\n  components: {\n    PageHeader\n  },\n  data() {\n    return {\n      title: 'Должности',\n      loadingPage: false,\n      URL: urls.API + roles.SUPER_ADMIN + urls.TEMPS.NAME + urls.TEMPS.PATH.POSITIONS,\n      items: [\n        // {number: 'Номер', model: 'Марка', color: 'Цвет', actions: 'Действия'},\n      ],\n      headers: [{\n        text: 'ID',\n        value: 'ID',\n        align: 'start',\n        sortable: false,\n        width: '25px'\n      }, {\n        text: 'Наименование',\n        value: 'name',\n        align: 'start',\n        sortable: false\n      }, {\n        text: 'Департамент',\n        value: 'department',\n        align: 'start',\n        sortable: false\n      }, {\n        text: 'Начальник',\n        value: 'is_head',\n        align: 'start',\n        sortable: false,\n        width: '25px'\n      }]\n    };\n  },\n  methods: {\n    checkFlag(flag) {\n      if (flag) return {\n        icon: \"check_circle\",\n        color: \"green\"\n      };else return {\n        icon: \"not_interested\",\n        color: \"grey\"\n      };\n    },\n    newPos() {\n      this.dialog_add_edit = true;\n      this.order_data = undefined;\n    },\n    editPos(item) {\n      this.dialog_add_edit = true;\n      this.order_data = item;\n    },\n    deletePos(item) {\n      this.dialog_delete = true;\n      this.order_data = item;\n    },\n    // eslint-disable-next-line no-unused-vars\n    closeEditDialog(event) {\n      this.loadData();\n      this.dialog_add_edit = false;\n      this.order_data = undefined;\n    },\n    closeDeleteDialog(event) {\n      if (event) {\n        makeDeleteRequest({\n          id: this.order_data.id\n        });\n      }\n      this.dialog_delete = false;\n      this.order_data = undefined;\n    },\n    updateData() {\n      this.loadData();\n    },\n    loadData() {\n      console.log(this.URL);\n      makeGetRequest(this.URL).then(resp => resp.json()).then(data => {\n        this.items = data.result;\n        console.log(this.items);\n      });\n    }\n  },\n  created() {\n    this.loadData();\n  }\n};","map":{"version":3,"mappings":"AA+EA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QACA;MAAA,CACA;MACAC,UACA;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAJ;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAH;QAAAC;QAAAC;QAAAC;QAAAC;MAAA;IAEA;EACA;EACAC;IACAC;MACA;QAAAC;QAAAC;MAAA,OACA;QAAAD;QAAAC;MAAA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;QACAC;UACAC;QACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACAC;MACAC,yBACAC,0BACAA;QACA;QACAF;MACA;IACA;EACA;EACAG;IACA;EACA;AACA","names":["name","components","PageHeader","data","title","loadingPage","URL","items","headers","text","value","align","sortable","width","methods","checkFlag","icon","color","newPos","editPos","deletePos","closeEditDialog","closeDeleteDialog","makeDeleteRequest","id","updateData","loadData","console","makeGetRequest","then","created"],"sourceRoot":"src/modules/admin/positions","sources":["PosList.vue"],"sourcesContent":["<template>\n  <div>\n    <PageHeader :title=\"title\"></PageHeader>\n\n    <v-container class=\"page-content d-flex flex-column align-center\">\n      <v-toolbar\n          class=\"removeBtnPaddingRight\"\n          color=\"#DADADA\"\n          dense\n          flat\n          width=\"700px\"\n      >\n        <v-toolbar-items v-if=\"$vuetify.breakpoint.mdAndUp\" class=\"pa-2\">\n          <v-btn\n              depressed\n              outlined\n              @click=\"newPos\"\n          >\n            Добавить должность\n          </v-btn>\n        </v-toolbar-items>\n      </v-toolbar>\n      <v-data-table\n          :headers=\"headers\"\n          :items=\"items\"\n          :loading=\"loadingPage\"\n          no-data-text=\"Нет данных\"\n          class=\"elevation-1\"\n          style=\"width: 700px\"\n      >\n        <template v-slot:[`item.is_head`]=\"{ item }\">\n          <v-icon\n              :color=\"checkFlag(item.is_head).color\"\n          >\n            {{ checkFlag(item.is_head).icon }}\n          </v-icon>\n        </template>\n        <template v-slot:[`item.actions`]=\"{ item }\">\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-icon\n                  class=\"mr-2\"\n                  @click=\"editPos(item)\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n              >\n                edit\n              </v-icon>\n            </template>\n            <span>Редактировать заявку</span>\n          </v-tooltip>\n          <v-tooltip bottom>\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-icon\n                  @click=\"deletePos(item)\"\n                  v-bind=\"attrs\"\n                  v-on=\"on\"\n                  class=\"mr-2\"\n              >\n                delete\n              </v-icon>\n            </template>\n            <span>Удалить заявку</span>\n          </v-tooltip>\n        </template>\n        <template v-slot:no-data>\n          <v-btn\n              color=\"primary\"\n              @click=\"updateData\"\n          >\n            Обновить\n          </v-btn>\n        </template>\n      </v-data-table>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport PageHeader from \"@/modules/core/components/PageHeader.vue\";\nimport urls from \"@/urls/urls\";\nimport roles from \"@/urls/roles\";\nimport {makeGetRequest, makeDeleteRequest} from \"@/helper\";\n\nexport default {\n  name: \"PosList\",\n  components: {PageHeader},\n  data() {\n    return {\n      title: 'Должности',\n      loadingPage: false,\n      URL: urls.API + roles.SUPER_ADMIN + urls.TEMPS.NAME + urls.TEMPS.PATH.POSITIONS,\n      items: [\n        // {number: 'Номер', model: 'Марка', color: 'Цвет', actions: 'Действия'},\n      ],\n      headers: [\n        {text: 'ID', value: 'ID', align: 'start', sortable: false, width: '25px'},\n        {text: 'Наименование', value: 'name', align: 'start', sortable: false},\n        {text: 'Департамент', value: 'department', align: 'start', sortable: false},\n        {text: 'Начальник', value: 'is_head', align: 'start', sortable: false, width: '25px'},\n      ],\n    }\n  },\n  methods: {\n    checkFlag(flag) {\n      if (flag) return {icon: \"check_circle\", color: \"green\"}\n      else return {icon: \"not_interested\", color: \"grey\"}\n    },\n    newPos() {\n      this.dialog_add_edit = true\n      this.order_data = undefined\n    },\n    editPos(item) {\n      this.dialog_add_edit = true\n      this.order_data = item\n    },\n    deletePos(item) {\n      this.dialog_delete = true\n      this.order_data = item\n    },\n    // eslint-disable-next-line no-unused-vars\n    closeEditDialog(event) {\n      this.loadData()\n      this.dialog_add_edit = false\n      this.order_data = undefined\n    },\n    closeDeleteDialog(event) {\n      if (event) {\n        makeDeleteRequest({\n          id: this.order_data.id,\n        })\n      }\n      this.dialog_delete = false\n      this.order_data = undefined\n    },\n    updateData() {\n      this.loadData()\n    },\n    loadData() {\n      console.log(this.URL)\n      makeGetRequest(this.URL)\n          .then(resp => resp.json())\n          .then(data => {\n            this.items = data.result\n            console.log(this.items)\n          })\n    }\n  },\n  created() {\n    this.loadData()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}